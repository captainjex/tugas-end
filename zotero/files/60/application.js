function generateVersionPaths(){var e,t,s;return e=window.location.pathname,t=",2.17,2.16,2.15,2.14",ENT_REGEX.test(e)&&(s=e.replace(ENT_REGEX,"")),$("#versions-dropdown").children("div").children("a").first().attr("href",s),t.split(",").forEach(function(t,s,a){var n,i,o;return n=t,ENT_REGEX.test(e)&&(e=e.replace(ENT_REGEX,"")),o=/./.test(n)?"/enterprise/"+n:"",i=o+e,$.ajax({type:"GET",url:i,complete:function(e){var t,a;return a=/Whoops, looks like that page doesn't exist/,t=$("#versions-dropdown").children("div").children("a")[s],a.test(e.responseText)?$(t).attr({href:o,"aria-label":"This page is not available on this version of Enterprise."}).addClass("muted tooltipped tooltipped-se"):$(t).attr("href",i).removeClass("muted")}})})}function handleDropdowns(){function e(e){9===e.keyCode&&$(this).addClass("is-tab-user")}function t(e){"mouseover"===e.type&&$(this).removeClass("is-tab-user");for(var t=0;t<this.children.length;t++)this.children[t].classList.contains("dropdown-menu")&&(s.element=this.children[t],$(s.element).children("a").children("span").remove(),this==document.getElementById("versions-dropdown")&&generateVersionPaths(),determineIfActive(s.element),addNoActiveItemsClass(s.element))}for(var s={},a=$(".dropdown"),n=0;n<a.length;n++){var i=$(a[n]).attr("id");document.getElementById(i).addEventListener("mouseover",t),document.getElementById(i).addEventListener("focusin",t),document.getElementById(i).addEventListener("click",t),document.getElementById(i).addEventListener("keydown",e)}}function determineIfActive(e){normalizedWindowPath=normalizePath(window.location.pathname),$(e).children("a").each(function(){var e=$(this).attr("href");if(e){var t=normalizePath(e);normalizedWindowPath&&t&&normalizedWindowPath[0]==t[0]&&$(this).addClass("active").prepend("<span class='octicon octicon-check'></span>")}})}function normalizePath(e){return/\/enterprise/.test(e)?e.match(COMBINED_REGEX):e.match(PATH_REGEX)}function addNoActiveItemsClass(e){$(e).children("a").children("span").length>0?$(e).removeClass("no-active-items"):$(e).addClass("no-active-items")}function initSidebar(){var e,t=$("#js-sidebar .js-topic"),s=!0,a=function(){var e=/\/\/[^\/]+([A-Za-z0-9-_.\/]+)/g,t=e.exec(window.location.toString());t&&$("#js-sidebar .js-topic a").each(function(){$(this).parent("li").hasClass("disable")&&$(this).parent("li").removeClass("disable");var e=$(this).attr("href").toString();"/"!==e.substr(-1)&&(e+="/");var s=t[1];if(e.indexOf(s)>=0&&e.length==s.length){$(this).parent("li").addClass("disable");var a=$(this).parents(".js-topic").first();a.addClass("js-current"),a.find(".js-expand-btn").first().toggleClass("collapsed expanded")}})};$("#js-sidebar .js-accordion-list .js-topic a[href*=#]").bind("click",function(e){window.location.toString().indexOf($(e.target).attr("href"))==-1&&setTimeout(a,0)}),$("body.api")&&window.location&&a(),$("#js-sidebar .js-topic").each(function(){0!=$(this).find(".disable").length&&0!=s||1==$(this).hasClass("js-current")?(e=$(this).index(),s=!1):$(this).find(".js-guides").children().hide()}),$("#js-sidebar .js-toggle-list .js-expand-btn").click(function(){var e=$(this).parents(".js-topic").first(),t=e.find(".js-guides li");return $(this).toggleClass("collapsed expanded"),t.slideToggle(100),!1}),$("#js-sidebar .js-accordion-list .js-topic h3 a").click(function(){var s=$(this).parents(".js-topic").first(),a=s.find(".js-guides li");return e!=s.index()?(t.eq(e)&&t.eq(e).find(".js-guides li").slideToggle(100),e=s.index(),a.slideToggle(100)):(e=void 0,a.slideToggle(100)),!1}),$.getJSON("https://www.githubstatus.com/api/v2/status.json",function(e){if(e){var t=e.status.indicator;"none"===t&&(t="good");var s=$("<a>").attr("href","https://www.githubstatus.com").addClass(e.status.indicator).attr("title","API Status:  "+t+". Click for details.").html("API Status: "+t);$(".api-status").html(s)}}),$(".js-earth-animation").length&&setTimeout(function(){$(".js-earth-animation").addClass("show-loop")},19e3),$(".tooltip-link").hover(function(){var e=$(this).attr("title");$(this).data("tipText",e).removeAttr("title"),$('<p class="tooltip-text"></p>').text(e).appendTo($(this)).fadeIn("slow")},function(){$(this).attr("title",$(this).data("tipText")),$(".tooltip-text").remove()}).mousemove(function(e){var t=e.pageX+20,s=e.pageY+10;$(".tooltip").css({top:s,left:t})});var n,n,i=window.location.search,o=document.getElementById("graphiql"),n="https://graphql-explorer.githubapp.com";i&&o&&(window.onload=function(){var e=o.contentWindow;e.postMessage(i,n)})}path=window.location.pathname,hash=window.location.hash,paths=path.split("/"),"enterprise"!=paths[1]||0!==paths[2].length&&!isNaN(paths[2])||(paths.splice(2,0,"2.17"),suffix=window.location.search||window.location.hash,window.location.href=window.location.protocol+"//"+window.location.host+paths.join("/")+suffix),"/v3/repos/"==path&&"#enabling-and-disabling-branch-protection"==hash&&(window.location.href="/v3/repos/branches/#get-branch-protection"),"/v3/repos/"==path&&"#list-branches"==hash&&(window.location.href="/v3/repos/branches/#list-branches"),"/v3/repos/"==path&&"#get-branch"==hash&&(window.location.href="/v3/repos/branches/#get-branch");var ENT_STRING="/enterprise/\\d\\.\\d\\d?",PATH_STRING="/(?:build/)?([^/]+)?/?",ENT_REGEX=new RegExp(ENT_STRING),PATH_REGEX=new RegExp(PATH_STRING),COMBINED_REGEX=new RegExp(ENT_STRING+PATH_STRING);$(function(){generateVersionPaths(),handleDropdowns(),initSidebar()}),$(function(){function e(){$.getJSON("/search/search-index.json",function(e){e.type={index:!0},d.postMessage(e),l=e,localStorage.searchIndex=JSON.stringify(l),localStorage.updated=(new Date).getTime()})}function t(){return(new Date).getTime()-parseInt(localStorage.updated,10)>864e5}function s(){$("#searchfield").val(""),$("#search-container").removeClass("active")}function a(e){c=[],e=e.toLowerCase(),d.postMessage({query:e,type:"search"})}function n(e,t){if($("#search-results").empty(),t.length<1)return void $('<li class="placeholder">No results for <em></em></li>').appendTo("#search-results").find("em").text(e);for(var s=0;s<Math.min(t.length,8);s++){var a=t[s];$('<li class="result"><a href="'+a.url+'"><em>'+a.title+"</em></a></li>").appendTo("#search-results")}$("#search-results li:first-child").addClass("selected")}function i(){$prev=$("#search-results .selected").prev(),$prev.length<1||($("#search-results .selected").removeClass("selected"),$prev.addClass("selected"))}function o(){$next=$("#search-results .selected").next(),$next.length<1||($("#search-results .selected").removeClass("selected"),$next.addClass("selected"))}function r(){var e=$("#search-results .selected a").attr("href");e&&(window.location.href=e)}var l,c,d=new Worker("/assets/javascripts/search_worker.js");localStorage.searchIndex?(l=JSON.parse(localStorage.searchIndex),t()?e():(l.type="index",d.postMessage(l))):e(),$("#searchfield").val().length>0&&($("#search-container").addClass("active"),a($("#searchfield").val())),$("#searchfield").on("input",function(e){$(this).val().length>0?$("#search-container").addClass("active"):$("#search-container").removeClass("active"),a($(this).val())}),$("body").keyup(function(e){if(83==e.keyCode){if($("input").is(":focus"))return;e.preventDefault(),$("#searchfield").focus()}}),$("#searchfield").keyup(function(e){27==e.keyCode?(e.preventDefault(),$("#searchfield").val().length>0?s():$("#searchfield").blur()):13==e.keyCode?(e.preventDefault(),r()):8!=e.keyCode&&46!=e.keyCode||($(this).val().length>0?$("#search-container").addClass("active"):$("#search-container").removeClass("active"),a($(this).val()))}).keydown(function(e){38==e.keyCode?(e.preventDefault(),i()):40==e.keyCode?(e.preventDefault(),o()):27==e.keyCode&&e.preventDefault()}),$(".cancel-search").click(function(e){s()}),d.addEventListener("message",function(e){e.data.type.search&&n(e.data.query,e.data.results)}),$("#search-results").on("mouseenter","li",function(e){$(this).parent().find(".selected").removeClass("selected").end().end().addClass("selected")})}),$(function(){var e;$("ol img").each(function(e,t){return $(t).parent().prepend(t)}),$(document).on("click","ol img",function(t){var s,a;return e(),a=$(t.currentTarget).clone(),s=$('<div class="js-full-image full-image"><span class="octicon octicon-x"></span></div>').prepend(a),$(this).closest("li").append(s),$(document).on("click",".js-full-image",function(){return e(),!1})}),e=function(){return $(document).off("click",".js-full-image",e),$(".js-full-image").remove()}});